{"version":3,"sources":["classes/BoardCell.js","classes/BoardPiece.js","components/InvitePlayer/InvitePlayer.jsx","components/Board/Board.jsx","components/GameGenerator/GameGenerator.jsx","App.js","serviceWorker.js","index.js"],"names":["BoardCell","row","col","piece","this","BoardPiece","player","isKing","InvitePlayer","document","getElementById","select","execCommand","className","Modal","centered","show","Header","Title","Body","InputGroup","FormControl","id","value","process","props","location","pathname","readOnly","Append","onClick","copyToClipboard","Text","Footer","PropTypes","any","React","Component","withRouter","Board","board","i","push","j","state","targets","pieceToMove","isMyTurn","inJumpChain","hasBothPlayers","socket","io","on","setState","val","console","log","cell","movePiece","emit","newBoard","createBoardFromObject","error","forEach","r","c","getMoveTargets","res","getPossibleTargets","adj","hasPiece","jumpTarget","canJumpOver","canMoveTo","pieceToJump","includes","endTurn","isJump","Math","abs","jumpRow","jumpCol","target","length","dir","map","rowId","key","colId","canHavePiece","handleCellClick","showMoveTargets","icon","chessQueen","GameGenerator","gameURL","url","random","toString","substring","window","open","href","Button","createGame","App","basename","path","exact","component","Boolean","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.03bbfe12.chunk.js","sourcesContent":["export default class BoardCell {\r\n    constructor(row, col, piece = null) {\r\n        this.row = row;\r\n        this.col = col;\r\n        this.piece = piece;\r\n    }\r\n\r\n    canHavePiece() {\r\n        return (this.row + this.col) % 2 === 1;\r\n    }\r\n\r\n    hasPiece() {\r\n        return this.piece !== null;\r\n    }\r\n}","export default class BoardPiece {\r\n    constructor(player, row, col, isKing = false) {\r\n        this.player = player;\r\n        this.row = row;\r\n        this.col = col;\r\n        this.isKing = isKing;\r\n    }\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './InvitePlayer.scss';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport InputGroup from 'react-bootstrap/InputGroup';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass InvitePlayer extends React.Component {\r\n    static get propTypes() {\r\n        return {\r\n            location: PropTypes.any\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Highlight the text box\r\n        document.getElementById('url').select();\r\n    }\r\n\r\n    copyToClipboard() {\r\n        document.getElementById('url').select();\r\n        document.execCommand('copy');\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='invitePlayer'>\r\n                <Modal centered show={true}>\r\n                    <Modal.Header>\r\n                        <Modal.Title>Invite a friend!</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <InputGroup>\r\n                            <FormControl\r\n                                id=\"url\"\r\n                                value={process.env.REACT_APP_BASE_URL + this.props.location.pathname}\r\n                                readOnly\r\n                            />\r\n                            <InputGroup.Append id=\"copy-btn\" onClick={this.copyToClipboard}>\r\n                                <InputGroup.Text>Copy</InputGroup.Text>\r\n                            </InputGroup.Append>\r\n                        </InputGroup>\r\n                    </Modal.Body>\r\n                    <Modal.Footer id=\"modal-footer\">\r\n                        <p>The game will start once another player has joined.</p>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(InvitePlayer);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport io from 'socket.io-client';\r\n\r\nimport BoardCell from '../../classes/BoardCell';\r\nimport BoardPiece from '../../classes/BoardPiece';\r\nimport InvitePlayer from \"../InvitePlayer/InvitePlayer\";\r\n\r\nimport { Icon } from '@iconify/react';\r\nimport chessQueen from '@iconify/icons-mdi/chess-queen';\r\nimport './Board.scss';\r\n\r\n\r\n\r\n//TODO: \r\n// Add logic for ending turn in jump chain\r\n// Add visuals to display whose turn it is\r\n// Winning/tie conditions\r\n// Add error handling for if a user joins a game that is full\r\n// Add dragging for pieces\r\n// Make API secure\r\n\r\nexport default class Board extends React.Component {\r\n    static get propTypes() {\r\n        return {\r\n            location: PropTypes.any\r\n        };\r\n    }\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let board = [];\r\n        for (let i = 0; i < 8; i++) {\r\n            board.push([]);\r\n            for (let j = 0; j < 8; j++) {\r\n                if ((i + j) % 2 === 1) {\r\n                    if (i < 3) {\r\n                        board[i].push(new BoardCell(i, j, new BoardPiece(2, i, j)));\r\n                    } else if (i >= 5) {\r\n                        board[i].push(new BoardCell(i, j, new BoardPiece(1, i, j)));\r\n                    } else {\r\n                        board[i].push(new BoardCell(i, j));\r\n                    }\r\n                } else {\r\n                    board[i].push(new BoardCell(i, j));\r\n                }\r\n            }\r\n        }\r\n        this.state = {\r\n            board: board,\r\n            targets: [],\r\n            pieceToMove: null,\r\n            player: null,\r\n            isMyTurn: false,\r\n            inJumpChain: false,\r\n            hasBothPlayers: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const ENDPOINT = process.env.REACT_APP_API_ENDPOINT;\r\n        this.socket = io(ENDPOINT);\r\n        \r\n        this.socket.on('player-number', (player) => {\r\n            this.setState({\r\n                player: player\r\n            });\r\n        });\r\n        this.socket.on('has-both-players', (val) => {\r\n            console.log(val);\r\n            this.setState({hasBothPlayers: val});\r\n        });\r\n        this.socket.on('move', (cell, piece) => {\r\n            this.movePiece(piece, cell);\r\n        });\r\n\r\n        this.socket.on('endturn', () => {\r\n            this.setState({\r\n                isMyTurn: true\r\n            });\r\n        });\r\n        this.socket.on('connection', () => {\r\n            this.socket.emit('join-room', this.props.location.pathname);\r\n        });\r\n        this.socket.on('boardConfig', (board) => {\r\n            let newBoard = this.createBoardFromObject(board);\r\n            this.setState({\r\n                board: newBoard\r\n            });\r\n        });\r\n        this.socket.on('err', (error) => {\r\n            console.log(error);\r\n        });\r\n    }\r\n\r\n    // Creates a new board from the object passed in from the server\r\n    createBoardFromObject(board) {\r\n        board.forEach((row, r) => {\r\n            row.forEach((cell, c) => {\r\n                let piece = board[r][c].piece;\r\n                if (piece !== null) {\r\n                    piece = new BoardPiece(piece.player, piece.row, piece.col, piece.isKing);\r\n                }\r\n                board[r][c] = new BoardCell(r, c, piece);\r\n            });\r\n        });\r\n        return board;\r\n    }\r\n\r\n    showMoveTargets(piece) {\r\n        if (this.state.isMyTurn && !this.state.inJumpChain && piece.player === this.state.player) {\r\n            this.setState({\r\n                targets: this.getMoveTargets(piece.row, piece.col),\r\n                pieceToMove: piece\r\n            });  \r\n        }\r\n    }\r\n\r\n    // Returns an array of cells\r\n    getMoveTargets(row, col) {\r\n        const board = this.state.board;\r\n        const piece = board[row][col].piece;\r\n\r\n        let res = [];\r\n\r\n        this.getPossibleTargets(piece).forEach(adj => {\r\n            if (adj.hasPiece()) {\r\n                const jumpTarget = this.canJumpOver(piece, adj.piece);\r\n                if (jumpTarget !== null) {\r\n                    res.push(jumpTarget);\r\n                }\r\n            } else {\r\n                if (this.canMoveTo(piece, adj)) {\r\n                    res.push(adj);\r\n                }\r\n            }\r\n        });\r\n        return res;\r\n    }\r\n\r\n    canMoveTo(piece, cell) {\r\n        if (!piece.isKing) {\r\n            // Player 1 cannot move down\r\n            // Player 2 cannot move up\r\n            if ((piece.player === 1 && cell.row > piece.row) || (piece.player === 2 && cell.row < piece.row)) {\r\n                return false;\r\n            }\r\n        }\r\n        if (!cell.hasPiece()) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Returns the target cell if the pieceToJump can be jumped, otherwise returns false.\r\n     *\r\n     * @param BoardPiece pieceToMove\r\n     * @param BoardPiece pieceToJump\r\n     */\r\n    canJumpOver(pieceToMove, pieceToJump) {\r\n        if (pieceToMove.player === pieceToJump.player) {\r\n            return false;\r\n        }\r\n        const board = this.state.board;\r\n        const row = 2 * (pieceToJump.row - pieceToMove.row) + pieceToMove.row;\r\n        const col = 2 * (pieceToJump.col - pieceToMove.col) + pieceToMove.col;\r\n\r\n        if (row >= 0 && col >= 0 && row < 8 && col < 8 && !board[row][col].hasPiece()) {\r\n            return board[row][col];\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    handleCellClick(cell) {\r\n        if (!this.state.targets.includes(cell)) {\r\n            return;\r\n        }\r\n        this.socket.emit('move', cell, this.state.pieceToMove);\r\n        if (!this.movePiece(this.state.pieceToMove, cell)) {\r\n            this.endTurn();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Moves a piece on the board.\r\n     *\r\n     * @param BoardPiece piece\r\n     * @param BoardCell cell\r\n     *\r\n     */\r\n    movePiece(piece, cell) {\r\n        let board = this.state.board;\r\n        let isJump = false;\r\n\r\n        // Handle the case where we are jumping a piece\r\n        if (Math.abs(piece.row - cell.row) === 2) {\r\n            const jumpRow = (piece.row + cell.row) / 2;\r\n            const jumpCol = (piece.col + cell.col) / 2;\r\n            board[jumpRow][jumpCol].piece = null;\r\n            if (piece.player === this.state.player) {\r\n                isJump = true;\r\n            }\r\n        }\r\n\r\n        board[piece.row][piece.col].piece = null;\r\n        piece.row = cell.row;\r\n        piece.col = cell.col;\r\n        if (!piece.isKing && (piece.row === 0 || piece.row === 7)) {\r\n            piece.isKing = true;\r\n        }\r\n        board[cell.row][cell.col].piece = piece;\r\n        this.setState({\r\n            targets: [],\r\n            pieceToMove: null,\r\n            board: board,\r\n            inJumpChain: false\r\n        });\r\n\r\n        this.socket.emit('boardConfig', board);\r\n\r\n        if (isJump) {\r\n            //Check if another piece can be jumped\r\n            let targets = [];\r\n            this.getPossibleTargets(piece).forEach(adj => {\r\n                if (adj.hasPiece()) {\r\n                    let target = this.canJumpOver(piece, adj.piece);\r\n                    if (target) {\r\n                        targets.push(target);\r\n                    }\r\n                }\r\n            });\r\n            if (targets.length > 0) {\r\n                this.setState({\r\n                    inJumpChain: true,\r\n                    pieceToMove: piece,\r\n                    targets: targets\r\n                });\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    endTurn() {\r\n        this.socket.emit('endturn');\r\n        this.setState({\r\n            isMyTurn: false\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Returns an array of diagnolly adjacent cells.\r\n     *\r\n     * @param BoardPiece piece\r\n     */\r\n    getPossibleTargets(piece) {\r\n        let adj = [];\r\n        const directions = [\r\n            [1, 1],\r\n            [-1, 1],\r\n            [1, -1],\r\n            [-1, -1]\r\n        ];\r\n\r\n        directions.forEach(dir => {\r\n            // For non-king pieces: player 1 cannot move down, and player 2 cannot move up\r\n            if (!piece.isKing && ((piece.player === 1 && dir[0] === 1) || (piece.player === 2 && dir[0] === -1))) {\r\n                return;\r\n            }\r\n            const row = piece.row + dir[0];\r\n            const col = piece.col + dir[1];\r\n            if (row >= 0 && col >= 0 && row < 8 && col < 8) {\r\n                adj.push(this.state.board[row][col]);\r\n            }\r\n        });\r\n\r\n        return adj;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='board'>\r\n                {!this.state.hasBothPlayers && <InvitePlayer />} \r\n                {this.state.board.map((row, rowId) => (\r\n                    <div className='row' key={rowId}>\r\n                        {row.map((cell, colId) => (\r\n                            <div\r\n                                className={`cell ${cell.canHavePiece() ? 'moveable' : ''}`}\r\n                                key={colId}\r\n                                onClick={() => this.handleCellClick(cell)}\r\n                            >\r\n                                {cell.hasPiece() && (\r\n                                    <div\r\n                                        className={`piece player${cell.piece.player}`}\r\n                                        onClick={() => this.showMoveTargets(cell.piece, rowId, colId)}\r\n                                    >\r\n                                        {cell.piece.isKing && <Icon icon={chessQueen} className='king' />}\r\n                                    </div>\r\n                                )}\r\n                                {this.state.targets.includes(cell) && <div className='target-marker'></div>}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport \"./GameGenerator.scss\";\r\n\r\n\r\nexport default class GameGenerator extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            gameURL: null\r\n        };\r\n    }\r\n\r\n    createGame() {\r\n        const url = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\r\n\r\n        this.setState({\r\n            gameURL: url\r\n        });\r\n\r\n        window.open(window.location.href + \"game/\" + url, \"_self\");\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"gameGenerator\">\r\n                <Button onClick={() => this.createGame()}>Click to start a game!</Button> \r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\n\nimport Board from './components/Board/Board';\nimport GameGenerator from './components/GameGenerator/GameGenerator';\nimport InvitePlayer from './components/InvitePlayer/InvitePlayer';\n\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nimport './App.scss';\n\nconst App = () => {\n    return (\n        <Router basename={process.env.PUBLIC_URL}>\n            <Route path='/' exact component={GameGenerator} />\n            <Route path='/game/:id' exact component={Board} />\n            <Route path='/test' exact component={InvitePlayer} />\n            \n        </Router>\n    );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}