(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),c=a.n(r),i=a(9),s=a(12),l=a(16),u=a(17),h=a(2),m=a.n(h),p=a(49),v=a.n(p),f=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(i.a)(this,e),this.row=t,this.col=a,this.piece=n}return Object(s.a)(e,[{key:"canHavePiece",value:function(){return(this.row+this.col)%2===1}},{key:"hasPiece",value:function(){return null!==this.piece}}]),e}(),y=function e(t,a,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(i.a)(this,e),this.player=t,this.row=a,this.col=n,this.isKing=o},d=(a(96),a(18)),g=a(21),k=a(56),w=a(14),b=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.getElementById("url").select()}},{key:"copyToClipboard",value:function(){document.getElementById("url").select(),document.execCommand("copy")}},{key:"render",value:function(){return o.a.createElement("div",{className:"invitePlayer"},o.a.createElement(d.a,{centered:!0,show:!0},o.a.createElement(d.a.Header,null,o.a.createElement(d.a.Title,null,"Invite a friend!")),o.a.createElement(d.a.Body,null,o.a.createElement(g.a,null,o.a.createElement(k.a,{id:"url",value:window.location,readOnly:!0}),o.a.createElement(g.a.Append,{id:"copy-btn",onClick:this.copyToClipboard},o.a.createElement(g.a.Text,null,"Copy")))),o.a.createElement(d.a.Footer,{id:"modal-footer"},o.a.createElement("p",null,"The game will start once another player has joined."))))}}],[{key:"propTypes",get:function(){return{location:m.a.any}}}]),a}(o.a.Component),E=Object(w.e)(b);a(102);function T(e){return o.a.createElement("div",{className:"turnContainer"},o.a.createElement("div",{className:"turns"},o.a.createElement("h1",null,1===e.whoseTurn&&o.a.createElement("span",{className:"active"}),"Player 1"),o.a.createElement("h1",null,2===e.whoseTurn&&o.a.createElement("span",{className:"active"}),"Player 2")))}var C=a(53),M=a(54),O=a.n(M),j=(a(103),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);for(var o=[],r=0;r<8;r++){o.push([]);for(var c=0;c<8;c++)(r+c)%2===1?r<3?o[r].push(new f(r,c,new y(2,r,c))):r>=5?o[r].push(new f(r,c,new y(1,r,c))):o[r].push(new f(r,c)):o[r].push(new f(r,c))}return n.state={board:o,targets:[],pieceToMove:null,player:null,isMyTurn:!1,inJumpChain:!1,hasBothPlayers:!1},n}return Object(s.a)(a,null,[{key:"propTypes",get:function(){return{location:m.a.any}}}]),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.socket=v()("https://simple-checkers.herokuapp.com/"),this.socket.on("player-number",(function(t){e.setState({player:t})})),this.socket.on("has-both-players",(function(t){e.setState({hasBothPlayers:t})})),this.socket.on("move",(function(t,a){e.movePiece(a,t)})),this.socket.on("endturn",(function(){e.setState({isMyTurn:!0})})),this.socket.on("connection",(function(){e.socket.emit("join-room",e.props.location.pathname)})),this.socket.on("boardConfig",(function(t){var a=e.createBoardFromObject(t);e.setState({board:a})})),this.socket.on("err",(function(e){console.log(e)}))}},{key:"createBoardFromObject",value:function(e){return e.forEach((function(t,a){t.forEach((function(t,n){var o=e[a][n].piece;null!==o&&(o=new y(o.player,o.row,o.col,o.isKing)),e[a][n]=new f(a,n,o)}))})),e}},{key:"showMoveTargets",value:function(e){this.state.isMyTurn&&!this.state.inJumpChain&&e.player===this.state.player&&this.setState({targets:this.getMoveTargets(e.row,e.col),pieceToMove:e})}},{key:"getMoveTargets",value:function(e,t){var a=this,n=this.state.board[e][t].piece,o=[];return this.getPossibleTargets(n).forEach((function(e){if(e.hasPiece()){var t=a.canJumpOver(n,e.piece);null!==t&&o.push(t)}else a.canMoveTo(n,e)&&o.push(e)})),o}},{key:"canMoveTo",value:function(e,t){return!(!e.isKing&&(1===e.player&&t.row>e.row||2===e.player&&t.row<e.row))&&!t.hasPiece()}},{key:"canJumpOver",value:function(e,t){if(e.player===t.player)return!1;var a=this.state.board,n=2*(t.row-e.row)+e.row,o=2*(t.col-e.col)+e.col;return n>=0&&o>=0&&n<8&&o<8&&!a[n][o].hasPiece()&&a[n][o]}},{key:"handleCellClick",value:function(e){this.state.targets.includes(e)&&(this.socket.emit("move",e,this.state.pieceToMove),this.movePiece(this.state.pieceToMove,e)||this.endTurn())}},{key:"movePiece",value:function(e,t){var a=this,n=this.state.board,o=!1;if(2===Math.abs(e.row-t.row)){var r=(e.row+t.row)/2,c=(e.col+t.col)/2;n[r][c].piece=null,e.player===this.state.player&&(o=!0)}if(n[e.row][e.col].piece=null,e.row=t.row,e.col=t.col,e.isKing||0!==e.row&&7!==e.row||(e.isKing=!0),n[t.row][t.col].piece=e,this.setState({targets:[],pieceToMove:null,board:n,inJumpChain:!1}),this.socket.emit("boardConfig",n),o){var i=[];if(this.getPossibleTargets(e).forEach((function(t){if(t.hasPiece()){var n=a.canJumpOver(e,t.piece);n&&i.push(n)}})),i.length>0)return this.setState({inJumpChain:!0,pieceToMove:e,targets:i}),!0}return!1}},{key:"endTurn",value:function(){this.socket.emit("endturn"),this.setState({isMyTurn:!1})}},{key:"getPossibleTargets",value:function(e){var t=this,a=[];return[[1,1],[-1,1],[1,-1],[-1,-1]].forEach((function(n){if(e.isKing||!(1===e.player&&1===n[0]||2===e.player&&-1===n[0])){var o=e.row+n[0],r=e.col+n[1];o>=0&&r>=0&&o<8&&r<8&&a.push(t.state.board[o][r])}})),a}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"game"},o.a.createElement("div",{className:"board ".concat(2===this.state.player?"player2":"")},!this.state.hasBothPlayers&&o.a.createElement(E,null),this.state.board.map((function(t,a){return o.a.createElement("div",{className:"row",key:a},t.map((function(t,n){return o.a.createElement("div",{className:"cell ".concat(t.canHavePiece()?"moveable":""),key:n,onClick:function(){return e.handleCellClick(t)}},t.hasPiece()&&o.a.createElement("div",{className:"piece player".concat(t.piece.player),onClick:function(){return e.showMoveTargets(t.piece,a,n)}},t.piece.isKing&&o.a.createElement(C.Icon,{icon:O.a,className:"king"})),e.state.targets.includes(t)&&o.a.createElement("div",{className:"target-marker"}))})))}))),o.a.createElement(T,{whoseTurn:this.state.isMyTurn?this.state.player:1===this.state.player?2:1}))}}]),a}(o.a.Component)),P=a(55),N=(a(104),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={gameURL:null},n}return Object(s.a)(a,[{key:"createGame",value:function(){var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);this.setState({gameURL:e}),window.open("/checkers/game/"+e,"_self")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"gameGenerator"},o.a.createElement(P.a,{onClick:function(){return e.createGame()}},"Click to start a game!"))}}]),a}(o.a.Component)),S=a(29),B=(a(105),function(){return o.a.createElement(S.a,{basename:"/checkers"},o.a.createElement(w.a,{path:"/",exact:!0,component:N}),o.a.createElement(w.a,{path:"/game/:id",exact:!0,component:j}),o.a.createElement(w.a,{path:"/test",exact:!0,component:T}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,t,a){e.exports=a(106)},93:function(e,t){},96:function(e,t,a){}},[[57,1,2]]]);
//# sourceMappingURL=main.c2f1163e.chunk.js.map